Секрет слаженности нашего трио в едином "дирижере" и точном расписании.

**Архитектура синхронизации:**

1.  **Центральный дирижер (Воркер):** В файле `/public/workers/ambient.worker.js` есть объект `Scheduler`. Он работает как дирижер оркестра. С заданным `BPM` он запускает "тик" для каждого нового такта.

2.  **Единая партитура на такт:** В каждом "тике" `Scheduler` просит генераторы (для барабанов, баса, соло) создать свои партии именно на этот такт. Все ноты внутри такта имеют время, рассчитанное относительно его начала (например, 0, 0.5, 1, 1.5 бита).

3.  **Точное время воспроизведения (Основной поток):** Воркер отправляет эти готовые партии в основной компонент `AuraGroove`. Компонент, получив партию, немедленно планирует ее воспроизведение с помощью `Tone.js`. Ключевой момент — использование `Tone.now()`. Эта функция получает абсолютно точное время из аудиоконтекста. Каждая нота планируется к воспроизведению в момент `Tone.now() + <время_ноты_в_такте>`.

Поскольку все партии для одного такта отправляются и планируются почти одновременно, они воспроизводятся идеально синхронно, как будто играют по одним часам.

Это сочетание централизованного планирования в воркере и высокоточного воспроизведения в `Tone.js` и создает ощущение слаженной игры трио.